# Name search
A collection of scripts in R and Ruby to gather a name database and generate (or guess) names based on search parameters

# Data source and scraping
These scripts rely on the United States Social Security Administration's birth name database for all analyses, found at `https://www.ssa.gov/cgi-bin/popularnames.cgi`.

Scraping, cleaning, and collation of data is handled by scripts modified from Hadley Wickham's `hadley/babynames` project, written in R and Ruby. First, data is collected year-by-year using POST requests from the `popularnames.cgi` form, using `RCurl`. Data are then parsed from tabular HTML format into year-by-year csv files using the `nokogiri` package in Ruby, and finally collated into a unified csv with a third R script. 

# Visualization via Shiny

Visualizations are presented via the Shiny app code stored in `name_generator/`, hosted at `https://graemebaird.shinyapps.io/name_generator/`.

## Name searcher
Tabular output is generated by piping user inputs through `dplyr` and grep functions, and then to `dataTableOutput` for a search/sortable dataframe object. 

*User inputs are:*

- Gender: filter entries by gender (boy, girl, both)
- Year sampled: subset entries by min/max year(s) of observation (any year(s) between 1880 and 2016)
- Number of letters: subset names by min/max length (0 characters to 12 characters)
- Number of vowels: subset names by min/max [a,e,i,o,u] content (0 vowels to 6 vowels)
- Number of consonants: subset names by min/max NO [a,e,i,o,u] content (0 consonants to 8 consonants)
- Rarity (yearly): subset names by threshold of yearly frequencies (year-to-year observations, NOT mean)
- Name contains this word: subset names containing any character string
- Name ends with: subset names ending with any character string
- Name starts with: subset names starting with any character string
- Name contains these letters: subset names containing any specified characters
- Reset inputs: reset all inputs to defaults

Note that no user inputs are case sensitive. 

*Outputs are:*

- Name: name
- Permille: permille (frequency per 1000)
- Vowels: number of vowels present
- Consonants: number of consonants present
- Length: number of characters present
- Years_obs: number of years name was observed (note that this variable may be affected by the rarity selector, independent of name)

Note that all outputs are sortable and searchable.

## Name plotter
Visualizations are generated by piping user inputs through `dplyr` and grep functions, and then to `ggplot` for graphics generation. This function accepts user-specified names and plots both male and female time-series line graphs of their frequency.

*Inputs are:*

-Name: 6 name fields are available for input. This function will automatically reject entries which are not found in the name database (but will only throw an error if no valid entries are detected)
-Log scale: option to plot on log scale
-Reset inputs: reset all inputs to defaults

## Search and plot
Visualizations are generated by piping user inputs through `dplyr` and grep functions, and then to `ggplot` for graphics generation. 

*Inputs are:*

Sort by: option to sort by Top10, Bottom10, and Random10, each corresponding to the top 10 and bottom 10 names by frequency and a random subset of 10 names.
Log scale: option to plot on log scale
Name contains this word:
Name ends with:
Name starts with:
Name contains these letters:

